pipeline{
        agent any
        
        environment {
        //CREDS_USR for docker user, CREDS_PSW for docker pass
        CREDS = credentials("dockerhubimageid")
        }
        
        stages{
            stage('Build'){
                steps{
                    sh "echo this is where the building happens"
                    sh "cat README.md"
                    sh "ls -al; pwd"
                    sh "echo cloning repo"
                    // sh "git clone https://github.com/hmahmood2351/HelloWorldFlask" - not needed, already in my repo
                    sh "echo building docker image - application"
                    sh "sudo docker build -t hmahmood2351/helloworldflask /var/lib/jenkins/workspace/testjob/Application/"
                    sh "echo $CREDS_USR; echo $CREDS_PSW"
                }
            }

            stage('Test'){
                steps{
                    sh "echo this is where the testing happens"
                }
            }
            stage('Deployment'){
                steps{
                    sh "echo this is where the deployment happens"
                    sh "echo pushing up to dockerhub"
                    sh "echo running a cmd that triggers a rolling update on the docker swarm manager, pushing it to workers"
                }
            }
        }
}
